\documentclass{article}

\usepackage{fontspec}
\usepackage[usenames,dvipsnames,svgnames,table]{xcolor}

\usepackage{syntax}

\title{Nix simplified grammar}
\date{}

\renewcommand{\grammarlabel}[2]{#1 #2}

\begin{document}

\maketitle{}

\begin{grammar}
<e> ::=
    x | c
  \alt e.a | e.a or e
  \alt p:e | e e
  \alt [ e ... e ] | \{ e = e; ...; e = e; \}
  \alt with e; e
  \alt if e then e else e
  \alt let x = e; ...; x = e; in e
  \textcolor{blue}{\alt e :: e | nil}
  \alt attrNames e | listToAttrs e
  \alt addAttr e e e | removeAttr e e
  % Not as-if in nix, but simpler than the actual builtins ("//" or
  % removeAttrs), and yet sufficient thanks to attrNames and listToAttrs
  \alt deepSeq e e
  \alt functionArgs e
  % Maybe this can be typed as a function, but it is rather unlikely

<a> ::= b. ... .b

<b> ::= \$\{e\} | l

<c> ::= s | i | ...

<p> ::= q | q@x | x

<q> ::= \{ f, ..., f \} | \{ f, ..., f, â€¦ \}

<f> ::= x | x ? e

\end{grammar}
\end{document}
